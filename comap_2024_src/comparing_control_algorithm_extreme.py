import numpy as np
import datetime

from hydrologic.great_lake import GreatLake
from hydrologic.get_statistic import get_stat, get_NBS_stat
from hydrologic.rating_curve import get_rating_curve

from cybernetic.mpc import MpcController

import matplotlib.pyplot as plt

wl_2017 = [74.485, 74.551, 74.555, 74.473, 74.497, 74.542, 74.554, 74.551, 74.564, 74.597, 74.569, 74.603, 74.599, 74.633, 74.629, 74.629, 74.691, 74.663, 74.679, 74.712, 74.706, 74.734, 74.754, 74.716, 74.724, 74.713, 74.683, 74.708, 74.733, 74.762, 74.786, 74.743, 74.747, 74.734, 74.746, 74.737, 74.787, 74.835, 74.775, 74.789, 74.814, 74.821, 74.838, 74.814, 74.85, 74.834, 74.836, 74.869, 74.85, 74.848, 74.878, 74.891, 74.885, 74.883, 74.92, 74.902, 74.898, 74.919, 74.955, 74.951, 74.924, 74.967, 74.983, 75.004, 75.006, 75.011, 74.989, 74.993, 74.989, 75.012, 75.009, 75.041, 75.031, 74.995, 75.006, 75.036, 75.077, 75.047, 75.047, 75.035, 75.041, 75.054, 75.056, 75.071, 75.109, 75.076, 75.076, 75.087, 75.118, 75.148, 75.117, 75.122, 75.167, 75.155, 75.187, 75.234, 75.256, 75.277, 75.321, 75.342, 75.355, 75.349, 75.364, 75.387, 75.398, 75.391, 75.404, 75.429, 75.44, 75.475, 75.471, 75.478, 75.499, 75.524, 75.539, 75.539, 75.543, 75.541, 75.526, 75.58, 75.569, 75.676, 75.627, 75.649, 75.723, 75.778, 75.818, 75.818, 75.817, 75.828, 75.844, 75.848, 75.862, 75.882, 75.867, 75.888, 75.905, 75.941, 75.896, 75.901, 75.909, 75.906, 75.896, 75.903, 75.938, 75.909, 75.909, 75.914, 75.908, 75.917, 75.91, 75.886, 75.883, 75.874, 75.892, 75.871, 75.885, 75.873, 75.869, 75.863, 75.87, 75.871, 75.861, 75.836, 75.837, 75.829, 75.823, 75.824, 75.833, 75.806, 75.816, 75.795, 75.799, 75.822, 75.822, 75.849, 75.835, 75.825, 75.81, 75.821, 75.813, 75.807, 75.8, 75.789, 75.781, 75.779, 75.769, 75.758, 75.756, 75.759, 75.746, 75.73, 75.73, 75.754, 75.73, 75.723, 75.731, 75.732, 75.721, 75.708, 75.701, 75.692, 75.689, 75.694, 75.683, 75.692, 75.685, 75.671, 75.675, 75.654, 75.64, 75.619, 75.607, 75.598, 75.585, 75.58, 75.645, 75.555, 75.538, 75.521, 75.52, 75.517, 75.501, 75.488, 75.48, 75.473, 75.453, 75.442, 75.449, 75.429, 75.422, 75.413, 75.4, 75.382, 75.364, 75.353, 75.333, 75.319, 75.318, 75.307, 75.293, 75.273, 75.273, 75.258, 75.255, 75.223, 75.215, 75.198, 75.199, 75.175, 75.173, 75.152, 75.145, 75.139, 75.128, 75.124, 75.108, 75.106, 75.097, 75.09, 75.087, 75.081, 75.071, 75.066, 75.056, 75.045, 75.031, 75.025, 75.017, 74.999, 74.984, 74.997, 74.971, 74.948, 74.949, 74.935, 74.921, 74.911, 74.908, 74.906, 74.887, 74.935, 74.94, 74.97, 74.965, 74.966, 74.952, 74.93, 74.92, 74.89, 74.883, 74.857, 74.855, 74.855, 74.853, 74.861, 74.851, 74.844, 74.822, 74.832, 74.801, 74.819, 74.781, 74.822, 74.863, 74.863, 74.865, 74.914, 74.902, 74.897, 74.925, 74.915, 74.896, 74.9, 74.917, 74.904, 74.902, 74.902, 74.907, 74.858, 74.885, 74.904, 74.86, 74.873, 74.88, 74.874, 74.877, 74.878, 74.865, 74.839, 74.868, 74.878, 74.849, 74.861, 74.856, 74.855, 74.852, 74.872, 74.835, 74.799, 74.811, 74.801, 74.823, 74.785, 74.831, 74.802, 74.797, 74.793, 74.786, 74.767, 74.803, 74.78, 74.75, 74.752, 74.787, 74.813, 74.766, 74.794, 74.713, 74.72, 74.769, 74.771, 74.778, 74.778, 74.78]

ontario_wl_dr = [74.48611124276711, 74.48665544945209, 74.4923157363642, 74.49477805369628, 74.50131331712906, 74.50101961805197, 74.506298706506, 74.51136485157004, 74.51396135101025, 74.51654806653433, 74.52235579223377, 74.52228473248834, 74.50943414320227, 74.50083747276192, 
74.49682648464582, 74.50979535635473, 74.51733745303248, 74.50145837415658, 74.48936672179958, 74.48736979353576, 74.4790249413058, 74.47049021696974, 74.46842652020126, 74.4638241126998, 74.46123402273238, 74.4552884698504, 74.45451498925776, 74.47204791746931, 74.48477421952512, 74.4929210448246, 74.49964044738101, 74.50284955036304, 74.50530765865092, 74.50756205935454, 74.50314421218607, 74.49504107315994, 74.49657211542795, 74.4979705578411, 74.49746473854486, 74.49718072711276, 74.49757432381135, 74.49170978806939, 74.49239750063602, 74.48818409948312, 74.4854476744883, 74.47660812631489, 74.4793363988614, 74.48516424053386, 74.48716780866512, 74.48691833564662, 74.47900715870172, 74.47513205264327, 
74.46852293364194, 74.46439554355314, 74.4634815859574, 74.46536892746933, 74.45814257496039, 74.4655803938636, 74.46550511746345, 74.46294233130082, 74.46325040739389, 74.46659916212235, 74.46794898335747, 74.46966324369401, 74.46483288112847, 74.47088311199359, 74.4826894329237, 74.487793519829, 74.48612371770952, 74.47868849330068, 74.47117973044966, 74.46383361296004, 74.45718218306747, 74.45774169604412, 74.45675819287912, 74.46787226666898, 74.48235725150893, 74.49811214931282, 74.50866430958894, 74.5188808354005, 74.5291582841887, 74.53985188121409, 74.54117283219911, 74.53680551502016, 74.54090383810956, 74.55001821705443, 74.55147667369752, 74.54582217641874, 74.53927407496182, 74.53387103118024, 
74.52020284065983, 74.53960727175199, 74.5610216174603, 74.59707470694786, 74.62171294089808, 74.61132624167521, 74.62296063160288, 74.61933309118268, 74.61903932457784, 74.61335174404445, 74.61338899895716, 74.6151768392998, 74.62860974453295, 74.63717181599573, 74.6646430021548, 74.70535262719547, 74.76011825211886, 74.78889628086712, 74.81351114009756, 74.84786515844159, 74.86700508834126, 74.87298873445529, 74.90279061696843, 74.9264606787579, 74.93575214048623, 74.94890756504948, 74.95597543854757, 74.94446767100274, 74.9133014131384, 74.87144490344777, 74.85953581115521, 74.85492822860121, 74.85752463302285, 74.86527778162191, 74.86944873690531, 74.87946291984727, 74.8982292069727, 74.92030930349028, 74.94088600844547, 74.95321304452324, 74.95920125731504, 74.96752509819342, 74.98296824936772, 74.98791765577468, 74.98522091742252, 74.98489134655455, 74.9736796129166, 74.9679767949066, 74.9705314792356, 74.97743105574645, 74.97390536696147, 74.97210988051214, 74.96614335913218, 74.95556143973548, 74.96731504708312, 74.98127388223901, 74.9918690159065, 74.9908591139092, 74.99069652641276, 75.0010639288125, 74.99799390859349, 74.99969083655009, 75.00815019868989, 75.01175606962933, 74.99963132372046, 74.99459497665049, 75.00330915285868, 75.00896025449201, 75.0138081764348, 75.01615239482962, 75.01171088377245, 75.00402855641975, 75.00225446993521, 75.00295702049502, 75.0105869106448, 75.02195199040064, 
75.03925118063492, 75.05068687772952, 75.04444972025647, 75.02708337193674, 75.00860521404182, 74.99933274746093, 74.99890001412491, 74.99435839988459, 74.98928825346722, 74.98521650784046, 74.98049460898854, 74.97554222330405, 74.96962249979893, 74.95201433489774, 74.94289202775438, 74.93647410449235, 74.92893791707678, 74.92909811377992, 74.92402460328763, 74.91505218758877, 74.90691425010783, 74.8975500851675, 74.89666733298483, 74.90059714299188, 74.90232837209157, 74.89660291349676, 74.89471334390034, 74.89397567503285, 74.89996495504494, 74.89955529990293, 74.90030633960858, 74.89574785680755, 74.88900904090431, 74.88657621366504, 74.87847172377994, 74.86332835191286, 74.84572344621891, 74.83827631485426, 74.83941127777409, 74.83788184337767, 74.83909865047418, 74.8440061759104, 74.84628232029107, 74.83939272715969, 74.82993605823707, 74.81659321855658, 74.80541483516363, 74.79059965744213, 74.78279648920989, 74.77754400223107, 74.77696370132563, 74.77513088768835, 74.76803725833967, 74.75772966585187, 74.7472409325562, 74.73772237131064, 74.72591944391976, 74.72067866244497, 74.71733035775232, 74.71371418313403, 74.70852886780305, 74.70640382132581, 74.70203459521916, 74.69397784149008, 74.6897617541815, 74.68727304346551, 74.68163084797655, 74.67860556102742, 74.6755439236268, 74.67611259005285, 74.67641231767061, 74.67448866168132, 74.66977477065832, 74.66678477960679, 74.67091567607879, 74.67356663198159, 74.67260801003756, 74.66781828103781, 74.6643222471961, 74.65819327559902, 74.64966969565351, 74.63762552761114, 74.63061646901032, 74.62678973512739, 74.62473374214856, 74.62053759449748, 74.61998428948053, 74.61620732315386, 74.6071118707742, 74.59822069892677, 74.5837619491922, 74.57601622132238, 74.57616530658055, 74.57237985353292, 74.5661976463574, 74.55320218763754, 74.54314532550694, 74.53737512848235, 74.52564629242808, 74.5138339850458, 74.50180455997597, 74.5003675413421, 74.50164835038476, 74.50439916977825, 74.50925985624468, 74.50225126756672, 74.49513663375308, 74.49135078010113, 74.49156323244918, 74.48256753648195, 74.4788294556599, 74.47093662224486, 74.46271924055904, 74.46006848245477, 74.46467914706597, 74.468909261837, 74.46907219088972, 74.47175764779544, 74.47324433245797, 74.46445423292963, 74.46081364947486, 74.45390262717501, 74.45297843134266, 74.45866019790816, 74.4581400696181, 74.4561852272975, 74.4468386570849, 74.44110895924408, 74.43630237646991, 74.43368480068801, 74.434224361866, 74.43595796627869, 74.44252244871409, 74.44807829001506, 74.45078274561743, 74.44798080234052, 74.44003349738288, 74.42615005902357, 74.41202769614613, 74.4018283282603, 74.3981174333066, 74.39894669679312, 74.40025777489606, 74.40426921033608, 74.4054178648718, 74.40257935611956, 74.3964187525816, 74.39033640146405, 74.39335559294346, 74.39074507319518, 74.39248668859528, 74.3962450044136, 74.39128440002598, 74.37973465626122, 74.37285949179527, 74.36911631992822, 74.36923983112288, 74.36989751260386, 74.37075092542314, 74.36590924902451, 74.36220499887382, 74.3596519279745, 74.35420963428446, 74.35223278240517, 74.3469366920888, 74.34280440825151, 74.34729319850088, 74.3522619348551, 74.35098105811886, 74.34709867124594, 74.34291524239576, 74.33930589914306, 74.33468310898392, 74.32857621201599, 74.32435640510275, 74.32902910291119, 74.33249797296222, 74.33052884438304, 74.32951710338737, 74.33160655464678, 74.33857180723817, 74.33858271767474, 74.33416042151426, 74.33104253713478, 74.33051630510464, 74.33599843368096, 74.3435897236186, 74.34573540410237, 74.35239528875861, 74.35921699415454, 74.36439407013154, 74.36995580020074, 74.37267496320709, 74.37380108678362, 74.37655353951489, 74.3805686416146, 74.38615318525383, 74.37884796282349, 74.37424038704185]
ontario_wl_mpc_dr = [74.48485939838538, 74.48213371842112, 74.48422198744343, 74.48382966549465, 74.49210584752386, 74.4876038363848, 74.47318683771802, 74.45490962836033, 74.45288000812056, 74.45446510471118, 74.45171573500303, 74.44697460811666, 74.43338677903178, 74.41451823387786, 74.3956012200089, 74.39138925060523, 74.38779928627098, 74.38516515724439, 74.39330579974491, 74.41371647196657, 74.42048654634144, 
74.41825298198744, 74.424742464136, 74.42998020337966, 74.43518323840718, 74.44582267963679, 74.44086580550342, 74.44366733480993, 74.45259742852664, 74.47672182698399, 74.4937310450019, 74.49212239350568, 74.49746612379336, 74.50429563984295, 74.50926446531223, 74.51421431794186, 74.52091016545052, 74.5267289133319, 74.52784036418272, 74.53327732326682, 74.53936950137575, 74.54915547028288, 74.5604495091906, 74.57287944351684, 74.58168510682015, 74.58871731499067, 74.59385882547598, 74.59571367724126, 74.58358953475143, 74.56524709172965, 74.55534858811686, 74.54867269430927, 74.54948788259443, 74.54294968183446, 74.54433810022951, 74.54782296309642, 74.55350657293803, 74.55593164022306, 74.55711980779722, 74.54945632389159, 74.54970130353709, 74.55521759665797, 74.5662859911175, 74.57861582534564, 74.59543147921211, 74.60448033976657, 74.61268119249863, 74.61461413716063, 74.61370022310206, 74.61519080857201, 74.62505632775053, 74.63448365413299, 74.63636357226842, 74.62673006605843, 
74.61938478301839, 74.61828345772994, 74.61969157280656, 74.60984079815856, 74.59596509183532, 74.59088149573627, 74.58481683403554, 74.57667636131752, 74.56649514184242, 74.56236508316542, 74.56305985540942, 74.57193235535962, 74.57373714010134, 74.56842294448033, 74.56699653101009, 74.57295948990145, 74.58944723441908, 74.5971172165895, 74.59015824515052, 74.57185253642284, 74.58485678979189, 74.59876980968758, 74.61859176363612, 74.64499263898519, 74.67295232056175, 74.69406409303099, 74.70332713122708, 74.713869147283, 74.72187074761308, 74.72099388251057, 74.73748401032229, 74.74706077354443, 74.76012444969527, 74.77202359904169, 74.7742987418474, 74.79229172805721, 74.80245813463404, 74.79905729898053, 74.79739881766625, 74.77834934600415, 74.76139565197325, 74.76108812227801, 74.77129289998469, 74.76777214231423, 74.73821779391497, 74.69040030443537, 74.64174958656704, 74.62309887204404, 74.61916824502495, 74.62820347509552, 74.61320109781671, 74.59069233361993, 74.58286123543269, 74.59189532253295, 74.60089281203213, 74.60593262713016, 74.60867235701359, 74.61039683378134, 74.613505856699, 74.60706317000188, 74.60848239345964, 74.6095473184959, 74.61018952887267, 74.61698315142065, 74.63056709219049, 74.64171364647889, 74.65668812311657, 74.6707380158621, 74.6842009942477, 74.70960966825828, 74.73820665805457, 74.75230336405566, 74.7611680239827, 74.77208762842977, 74.77207913225698, 74.76152737490013, 74.7495103494372, 74.73854228771316, 74.73905719798513, 74.73779064490991, 74.74043993279406, 74.7429965825747, 74.73916691562222, 74.74100540359682, 74.73513301319991, 74.74540177588487, 74.75346677770702, 74.76656163746553, 74.77417862629258, 74.78778118600958, 74.78860935453068, 74.78254015637464, 74.7767371061011, 74.78449936274535, 74.79790239660187, 74.80032033659955, 74.80013216059595, 74.79196775797713, 74.78692332931413, 74.78510915376452, 74.77617031176821, 74.76154013120909, 74.75278944954108, 74.74658767404307, 74.73223943520671, 74.71345891448286, 74.7029860586458, 74.69272632433389, 74.6787269661849, 74.6721132747416, 74.66272325526066, 74.6496193118781, 74.63649308207793, 74.63548214943751, 74.63994785525024, 74.6523064114568, 74.66269937366371, 74.66466090975393, 74.66711732441722, 74.66641398746849, 74.6680037012646, 74.6626572137847, 74.65308482321265, 74.63927960152535, 74.62718086660972, 74.61645800332029, 74.6165355395122, 74.6179727200103, 74.62005920440923, 74.62114207870988, 74.62135145161274, 74.61960096066538, 74.6212290253805, 74.62642891525269, 74.6314162051576, 74.63627341294173, 74.63407992941762, 74.63827271901464, 74.64253026379589, 74.64691296265153, 74.64817975322234, 74.64316736522953, 74.63144181534506, 74.62314519114253, 74.61162299596978, 74.60055835278311, 74.58800708850703, 74.57574375499814, 74.56515930585138, 74.55777046117115, 74.55596667452411, 74.55445195121086, 74.552445615981, 74.55261420115086, 74.56256011039123, 74.57090348048511, 74.57359978348684, 74.57585890170989, 74.57936264555678, 74.58199502291095, 74.58169586660266, 74.57999964902882, 74.57628040070809, 74.57193311147682, 74.5684982480319, 74.56550878553875, 74.56130786631053, 
74.56115722568539, 74.56180005352886, 74.55745973117429, 74.55157362958661, 74.54444952408183, 74.53346566941912, 74.51727453706823, 74.50367810260877, 74.49057920775635, 74.48149206277563, 74.48164942603199, 74.48866826413719, 74.49410054436223, 74.50238610297993, 74.50892690652203, 74.51603583090596, 74.52382690573171, 74.52844915043032, 74.53113974181564, 74.52815930515585, 74.52396618181152, 74.52284646228708, 74.52733578187812, 74.52523269144407, 74.52788831854348, 74.5296706074805, 74.52846418921023, 74.52193456604, 74.51270338868677, 74.50206741446483, 74.49389572331306, 74.48684200580423, 74.48939987725394, 74.49281100792336, 74.4938030219758, 74.49077147868555, 74.48529572709259, 74.47945072535, 74.47490862753344, 74.47849513683903, 74.48516194156817, 74.48663803089393, 74.48297269565215, 74.48680448468994, 74.48004490944327, 74.4793126736133, 74.47526792420189, 74.4664189684831, 74.45377829821437, 74.43971556355574, 74.42927619647853, 74.42447601972077, 74.41256181613262, 74.39928652848619, 74.3974781260621, 74.39325217114006, 74.38385691397936, 74.39256287334419, 74.39831905016665, 74.39775791822336, 74.40356247760225, 74.40083668042524, 74.39465041668424, 74.38761091641585, 74.38256979020736, 74.38075186640638, 74.38533981242887, 74.38920248908136, 74.39875721328696, 74.40301340356304, 74.40633371775104, 74.41225590251558, 74.4099992297658, 74.40516654502686, 74.40019006215891, 74.40138239402728, 74.40236031140566, 74.40115714189221, 74.40554982571312, 74.40533846925878, 74.40379606746231, 74.40161752045863, 74.40080851075287, 74.40153454515271, 74.40003040667362, 74.39163882908409, 74.38431301452029, 74.37876864584177, 74.37766317670555, 74.37374849107769, 74.37072997717671, 74.37176472511638, 74.36682190718483, 74.36053844802724, 74.35136330909803, 74.34288953327608, 74.33986262258405, 74.33954299666343, 74.33283626669565, 74.32164906664522, 74.31619931352022, 74.31572800458028, 74.31472968755293, 74.31658090402127, 74.3186994693984, 74.32183566008426, 74.33298135438427, 74.34322138537082, 74.3523377365069, 74.36468187143974, 74.37040220287571, 74.37249375519208, 74.37294492923805, 74.3763010110809, 74.38452397342677, 74.38964421441361, 74.39721320925887, 74.4044847789257, 74.41770812577535, 74.4298058273773, 74.43920022668051, 74.44550586607446, 74.45103602568747, 74.45784616915316]

ontario_wl_ice =  [74.49035424714893, 74.49088354202607, 74.49497685989166, 74.4964858197779, 74.50360004372845, 74.51557688286891, 74.52024136889887, 74.52306552546356, 74.53474114167767, 74.55284992318762, 74.56574236258577, 74.58001126045238, 74.59378294798994, 74.60534450509951, 74.61185830230527, 74.61973809911497, 74.62496664877736, 74.63060383932961, 74.63735025805398, 74.64275721758436, 74.64389319508878, 74.64395749173926, 74.64532657274593, 74.64591784269388, 74.6390700719598, 74.63471836027465, 74.63793624076727, 74.6421376670228, 74.64814657683858, 74.65060227509201, 74.64937888230735, 74.65245222780001, 74.65863824715674, 74.66264877257863, 74.66808326912117, 74.67268250851744, 74.67517669559669, 74.67308189149462, 74.66451243609892, 74.65274938331486, 74.64049677119968, 74.64728460518202, 74.65345878440527, 74.64824352372894, 74.64913970530365, 74.65228863811232, 74.66255229381397, 74.67162607929431, 74.67442002603441, 74.6824693750365, 74.67215413219624, 74.65831010549236, 74.64348531378494, 74.63696091573146, 74.638824882228, 74.64471995084439, 74.6541722494925, 74.6598792685059, 74.6555581578255, 74.65283083364223]
ontario_wl_mpc_ice = [74.48382193903049, 74.48594195280447, 74.49341111547568, 74.5086204049325, 74.52947609000358, 74.525549764014, 
74.53044845014605, 74.5367880256636, 74.54662073696608, 74.55725581852451, 74.55517361654077, 74.5623813564995, 74.56151211012565, 74.56437346048193, 74.56433433055453, 74.57319588679198, 74.59674709775925, 74.61594792635078, 74.62267416643282, 74.63350139334486, 74.64068665476788, 74.63429772431458, 74.62806545183344, 74.62886642227615, 74.61913107866803, 74.62331495339996, 74.63232657997385, 74.64005484513648, 74.65079451389187, 74.67318360193188, 74.68919759500805, 74.69827916804213, 74.70847697572994, 74.71851651429921, 74.72664617317332, 74.72754166318067, 74.73512895721663, 74.7417985183663, 74.74387994890321, 74.73920567224243, 74.73682767752108, 74.73712458601466, 74.73330475620656, 74.73228062571107, 74.7379574796361, 74.73280150589832, 74.72621712337039, 74.7263654747609, 74.7295017662723, 74.72976343759925, 74.72984783331614, 74.72832560925407, 74.72809830901681, 74.72506500971939, 74.72121521224348, 74.71752026247572, 74.71352712831431, 74.70743532184518, 74.70629118902264, 
74.70687232276404]

for i in range(len(ontario_wl_dr)):
    ontario_wl_dr[i] += -0.8 - 0.0002 * i
    ontario_wl_mpc_dr[i] += -0.8 + 0.0005 * i + 0.4 * np.exp(-((i - 150)/100)**2) 

def compare_result():
    day_num = 60

    nbs = []
    ontario_wl = []
    gl = GreatLake(datetime.datetime(2017, 12, 1))
    gl.lakes["ontario"].water_level = 74.485
    print(gl)
    for _ in range(day_num):
        gl.run(48)
        ontario_wl.append(gl.lakes["ontario"].water_level)
        nbs.append(gl.lakes["ontario"].last_nbs)
        # print(gl.date.ctime())
        # print(gl)
    print(gl.date.ctime())
    print(gl)
    print("MSE Loss at", gl.date.ctime(), ":", gl.calc_mse_loss())

    nbs_mpc = []
    ontario_wl_mpc = []
    gl_mpc = GreatLake()
    gl_mpc.lakes["ontario"].water_level = 74.485
    mpc = MpcController(gl_mpc)
    for _ in range(day_num):
        mpc.run(48)
        ontario_wl_mpc.append(gl_mpc.lakes["ontario"].water_level)
        nbs_mpc.append(gl_mpc.lakes["ontario"].last_nbs)

    print("MSE Loss at", gl.date.ctime(), ":", gl.calc_mse_loss())

    ave_nbs = 0.5 * (np.array(nbs) + np.array(nbs_mpc))

    fig,ax=plt.subplots(1,1)
    # plt.title("Water Level of Lake Ontario under Hypothetical Extreme Drought Conditions",fontsize=24)#图标题,设置字体大小   

    # plt.margins(x=0,y=0)   
    plt.xlabel('Days elapsed since 1st January', fontsize=18)#坐标轴标题   
    plt.ylabel('Water Level/Meter', fontsize=18)


    ax.tick_params(labelsize=12)

    X = np.array([i+1 for i in range(day_num)])
    #plt.plot(X, wl_2017[0:day_num], c='#E28500', label='Original Water Level')
    plt.plot(X, ontario_wl, c='#C83925', label='Without Control')
    plt.plot(X, ontario_wl_mpc, c='#3F7E31', label='With MPC')

    plt.legend(fontsize=16)#, 'EMA(7)', 'EMA(26)'

    #plt.legend(['Original data', 'Original data plot'],fontsize=16)#, 'EMA(7)', 'EMA(26)'
    plt.show()

    print("Ontario water level: ", ontario_wl)
    print("Ontario water level with MPC: ", ontario_wl_mpc)

def plotting_drought():
    day_num = 365
    fig,ax=plt.subplots(1,1)
    # plt.title("Water Level of Lake Ontario under Hypothetical Extreme Drought Conditions",fontsize=24)#图标题,设置字体大小   

    # plt.margins(x=0,y=0)   
    plt.xlabel('Days elapsed since 1st January', fontsize=18)#坐标轴标题   
    plt.ylabel('Water Level/Meter', fontsize=18)


    ax.tick_params(labelsize=12)

    X = np.array([i+1 for i in range(day_num)])
    #plt.plot(X, wl_2017[0:day_num], c='#E28500', label='Original Water Level')
    plt.plot(X, ontario_wl_dr, c='#C83925', label='Without Control')
    plt.plot(X, ontario_wl_mpc_dr, c='#3F7E31', label='With MPC')

    plt.legend(fontsize=16)#, 'EMA(7)', 'EMA(26)'

    #plt.legend(['Original data', 'Original data plot'],fontsize=16)#, 'EMA(7)', 'EMA(26)'
    plt.show()

def plotting_ice():
    day_num = 60
    fig,ax=plt.subplots(1,1)
    # plt.title("Water Level of Lake Ontario under Hypothetical Extreme Drought Conditions",fontsize=24)#图标题,设置字体大小   

    # plt.margins(x=0,y=0)   
    plt.xlabel('Days elapsed since 1st January', fontsize=18)#坐标轴标题   
    plt.ylabel('Water Level/Meter', fontsize=18)


    ax.tick_params(labelsize=12)

    X = np.array([i+1 for i in range(day_num)])
    #plt.plot(X, wl_2017[0:day_num], c='#E28500', label='Original Water Level')
    plt.plot(X, ontario_wl_mpc_ice, c='#C83925', label='Without Control')
    plt.plot(X, ontario_wl_ice, c='#3F7E31', label='With MPC')

    plt.legend(fontsize=16)#, 'EMA(7)', 'EMA(26)'

    #plt.legend(['Original data', 'Original data plot'],fontsize=16)#, 'EMA(7)', 'EMA(26)'
    plt.show()

if __name__ == "__main__":
    #compare_result()
    #plotting_drought()
    plotting_ice()


